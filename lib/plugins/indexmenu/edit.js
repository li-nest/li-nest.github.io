function indexmenu_toolbar_additions(){var d,c,b,a=$("tool__bar");if(!a){return;}d=$("edbtn__save");if(!d){return;}indexmenu_createPicker("picker_plugin_indexmenu");b=indexmenu_createToolbar();b.onclick=(function(){indexmenu_ajax("req=local","picker_plugin_indexmenu",this,true);return false;});a.appendChild(b);c=window.indexmenu_contextmenu;if(c[1]){window.indexmenu_contextmenu[0]=c[1].concat(c[0]);}}function indexmenu_createThemes(q,p){var o=new Array(new Array("<p><strong><em>Navigation</em></strong></p>",0),new Array("navbar","The tree opens at the current namespace. Good for navigation sidebars."),new Array("id#random","To be used in case of two or more navbar indexmenu trees."),new Array("<p><strong><em>Sort</em></strong></p>",0),new Array("tsort","Sort by title."),new Array("dsort","Sort by date."),new Array("msort","Sort by meta tag."),new Array("nsort","Sort namespaces."),new Array("<p><strong><em>Performance</em></strong></p>",0),new Array("max#2","How many levels to render with ajax when a node is opened."),new Array("maxjs#2","How many levels to render in the client browser when a node is opened."),new Array("<p><strong><em>Others</em></strong></p>",0),new Array("nocookie","No cookies."),new Array("nons","Show only pages."),new Array("nopg","Show only namespaces."),new Array("noscroll","Prevent to scrolling the tree when it does not fit the container width."),new Array("notoc","Disable the toc preview feature."));var n,m,l,k,j,i,h,g,f,e,d,c,b,a;i=q.split(",");h=i.shift();if(h!="indexmenu"){p.innerHTML="No themes";i=[];}else{j=i.shift();j+=i.shift();}g=document.createElement("fieldset");f=document.createElement("legend");f.innerHTML="<strong>Themes</strong>";g.appendChild(f);for(k in i){n=document.createElement("button");n.className="pickerbutton";m=document.createElement("img");m.src=j+"/"+i[k]+"/base."+indexmenu_findExt(i[k]);l=i[k];n.title=l;n.appendChild(m);if(l=="default"){l="";}else{l="#"+l;}eval("n.onclick = function(){indexmenu_opts(\""+l+"\");}");if(l===""){g.insertBefore(n,p.firstChild);}else{g.appendChild(n);}}p.appendChild(g);e=document.createElement("form");e.id="indexmenu_optfrm";e.className="indexmenu_opts";d=document.createElement("p");d.innerHTML="<strong>Options<strong>";g.appendChild(d);for(k in o){c=document.createElement("label");c.innerHTML=o[k][0]+" ";if(o[k][1]){c.title=o[k][1];n=document.createElement("input");n.type="checkbox";n.name="check";n.title=o[k][1];n.value=o[k][0];e.appendChild(n);}e.appendChild(c);}g.appendChild(e);p.appendChild(g);b=g.cloneNode(false);a=f.cloneNode(false);a.innerHTML="<strong>Extra</strong>";b.appendChild(a);n=document.createElement("button");n.className="pickerbutton";m=document.createElement("img");m.src=j+"/msort.gif";n.title="Insert meta sort number";n.appendChild(m);n.onclick=(function(){insertTags("wiki__text","{{indexmenu_n>","}}","1");$("picker_plugin_indexmenu").style.display="none";return false;});b.appendChild(n);p.appendChild(b);}function indexmenu_createToolbar(){var b=document.createElement("img");b.src=DOKU_BASE+"lib/plugins/indexmenu/images/indexmenu_toolbar.png";var a=document.createElement("button");a.id="syntax_plugin_indexmenu";a.className="toolbutton";a.title="Insert the Indexmenu tree";a.appendChild(b);return a;}function indexmenu_createPicker(c){var b=document.createElement("div");b.className="picker";b.id=c;b.style.position="absolute";b.style.display="none";var a=document.getElementsByTagName("body")[0];a.appendChild(b);return b;}function indexmenu_opts(d){var c,b="";var a=$("indexmenu_optfrm");for(c=0;c<a.length;c++){if(a[c].checked){b=b+" "+a[c].value;}}insertTags("wiki__text","{{indexmenu>","|js"+d+b+"}}","#1");$("picker_plugin_indexmenu").style.display="none";return false;}function indexmenu_insertTags(d,c){var b,a=d;if(c){b=new RegExp(c,"g");a=d.replace(b,":");}insertTags("wiki__text","[[","]]",a);}indexmenu_toolbar_additions();
